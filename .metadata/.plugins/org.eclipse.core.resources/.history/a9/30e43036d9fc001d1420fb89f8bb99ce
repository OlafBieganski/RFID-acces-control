#include "keypad.h"

void keypad_init(){
	for(uint8_t l_row = 0; l_row < NUM_OF_ROWS; l_row++)
		HAL_GPIO_WritePin(row_ports_array[l_row],
						  row_pins_array[l_row],
						  GPIO_PIN_SET);
}

int8_t keypad_scan_pressed_index(){
	int8_t l_row_pressed = -1;
	int8_t l_col_pressed = -1;
	int16_t debounce_time = BUTTON_DEBOUNCE_TIME_MS;

	for(uint8_t l_row = 0; l_row < NUM_OF_ROWS; l_row++){
		HAL_GPIO_WritePin(row_ports_array[l_row],
						  row_pins_array[l_row],
						  GPIO_PIN_RESET);
		for(uint8_t l_col = 0; l_col < NUM_OF_COLUMNS; l_col++){
			if(HAL_GPIO_ReadPin(column_ports_array[l_col],
								column_pins_array[l_col]) == GPIO_PIN_RESET){
				while(--debounce_time)
			}
		}
	}
}
